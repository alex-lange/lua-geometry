# Lua Geometry

This collection contains mostly ports of open source libraries and algorithms that I've used in my exploration of procedural 2d map generation for Love2d games. Most of this research stemmed from stumbling on Amit Patel's (Red Blob Games) informative and evidently influential article [Polygonal Map Generation for Games](http://www-cs-students.stanford.edu/~amitp/game-programming/polygon-map-generation/), as well as their other excellent writings on related topics like [Data structure for triangle meshes](https://www.redblobgames.com/x/1722-b-rep-triangle-meshes/), [Alternatives to Voronoi diagrams](https://www.redblobgames.com/x/1721-voronoi-alternative/) and [Jittered grid vs Poisson disc](https://www.redblobgames.com/x/1830-jittered-grid/). Even their Appendices are a treasure trove of interesting rabbit holes.

The above articles pointed me to [Delaunator](https://github.com/mapbox/delaunator) for Delaunay Triangulation, which I've ported to Lua in [delanaunator.lua](./src/delaunator.lua). Delaunator uses [robust-predicates](https://github.com/mourner/robust-predicates) for producing valid output "even on highly degenerate input". I started porting this code as well, but my use hasn't required handling these degenerate cases, so I've kept just the standard cross-product approach for triangle orientation in [orient2d.lua](./src/orient2d.lua).

The discussion of jittered grids vs Poisson discs led me to generation methods such as those documented in [Fil's overview on Observable](https://observablehq.com/@fil/poisson-distribution-generators). I've ported one such method, Martin Roberts's [improvement to Bridson's Algorithm for Poisson Disc sampling](https://observablehq.com/@techsparx/an-improvement-on-bridsons-algorithm-for-poisson-disc-samp/2), in [poisson-disc-sampler.lua](./src/poisson-disc-sampler.lua).

I wrote [mesh.lua](./src/mesh.lua) based on Amit's [Delaunator Guide](https://mapbox.github.io/delaunator/), which discusses how to interact with the triangles and Voronoi cells produced by Delanuator, and their implementation of these ideas in their [dual-mesh repository](https://github.com/redblobgames/dual-mesh/).

Lastly, [list.lua](./src/list.lua) and [class.lua](./src/class.lua) are taken from existing open source Lua libraries. The former is a slight modification of [table_list.lua](https://github.com/TheAlgorithms/Lua/blob/d594ea37578f32965a07967d6e44ef1f8c108108/src/data_structures/table_list.lua) from [TheAlgorithms/Lua repository](https://github.com/TheAlgorithms/Lua/). (It was simpler for me to a use a library for lists that support pushing and popping.) The latter is from the popular and largely useful [HUMP library](https://github.com/vrld/hump/) for Love2d. I've used most of the library during my Love2d learnings, and I just didn't stop using [class.lua](https://github.com/vrld/hump/blob/40aa4cb7c50fd33f8925d80450b462d937cea866/class.lua) when working on this geometry code.
